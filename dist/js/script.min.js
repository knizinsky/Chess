"use strict";var gameBoard=document.getElementById("gameBoard"),ctx=gameBoard.getContext("2d"),brownColor="#653c10",whiteColor="#dfc795",windowWidth=window.innerWidth,windowHeight=window.innerHeight,gameBoardSize=Math.min(windowWidth,windowHeight,600),board=[["r","p","","","","","P","R"],["n","p","","","","","P","N"],["b","p","","","","","P","B"],["q","p","","","","","P","Q"],["k","p","","","","","P","K"],["b","p","","","","","P","B"],["n","p","","","","","P","N"],["r","p","","","","","P","R"]],pieceNames={p:"Bpawn",r:"Brook",n:"Bknight",b:"Bbishop",q:"Bqueen",k:"Bking",P:"Wpawn",R:"Wrook",N:"Wknight",B:"Wbishop",Q:"Wqueen",K:"Wking"},tileSize=gameBoardSize/8,selectedPiece=null,whitesMove=!0,drawPiece=function(e,i,o){var t=new Image;t.src="./dist/img/".concat(e,".png"),t.onload=function(){ctx.drawImage(t,i,o,tileSize,tileSize)}},drawBoardAndPieces=function(e){for(var i=0,o=0;i<e;i+=tileSize,o++)for(var t=0,a=0;t<e;t+=tileSize,a++){ctx.fillStyle=o%2==0?a%2==0?whiteColor:brownColor:a%2==0?brownColor:whiteColor;var n=board[o][a];""!=n&&drawPiece(pieceNames[n],i,t),ctx.fillRect(i,t,tileSize,tileSize)}},resizeCanvas=function(){gameBoard.width=gameBoardSize,gameBoard.height=gameBoardSize,drawBoardAndPieces(gameBoardSize)},selectPiece=function(e){var i=e.offsetX,e=e.offsetY,o=Math.floor(e/tileSize),t=Math.floor(i/tileSize),e=Math.floor(e/tileSize),i=Math.floor(i/tileSize);selectedPiece=board[t][o],movePiece(selectedPiece,e,i)},movePiece=function(e,a,n){function i(o){e==o&&board.forEach(function(e,i){e.forEach(function(t,e){t==o&&a==e&&n==i&&(board[n][a]="",gameBoard.addEventListener("click",function e(i){drawBoardAndPieces(gameBoardSize);var o=i.offsetX,i=i.offsetY,i=Math.floor(i/tileSize),o=Math.floor(o/tileSize);(board[n][a]="")==board[o][i]&&(board[o][i]=t,r=board[o][i],drawPiece(pieceNames[r],o*tileSize,i*tileSize),whitesMove=!whitesMove,console.log(whitesMove)),gameBoard.removeEventListener("click",e)}))})})}var r;if(whitesMove)for(var o in{P:"Wpawn",R:"Wrook",N:"Wknight",B:"Wbishop",Q:"Wqueen",K:"Wking"})o==e&&i(o);else for(var t in{p:"Bpawn",r:"Brook",n:"Bknight",b:"Bbishop",q:"Bqueen",k:"Bking"})t==e&&i(t)},whiteMoves=function(){},blackMoves=function(){};window.addEventListener("resize",resizeCanvas),window.addEventListener("load",function(){gameBoard.addEventListener("click",selectPiece),resizeCanvas()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnYW1lQm9hcmQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3R4IiwiZ2V0Q29udGV4dCIsImJyb3duQ29sb3IiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwid2hpdGVDb2xvciIsImlubmVySGVpZ2h0Iiwid2luZG93V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJnYW1lQm9hcmRTaXplIiwiTWF0aCIsImJvYXJkIiwicGllY2VOYW1lcyIsInAiLCJyIiwibiIsImIiLCJxIiwiayIsInRpbGVTaXplIiwiUCIsIndoaXRlc01vdmUiLCJSIiwiZHJhd1BpZWNlIiwiTiIsIkIiLCJpbWciLCJRIiwiSyIsImRyYXdCb2FyZEFuZFBpZWNlcyIsInNlbGVjdGVkUGllY2UiLCJwaWVjZU5hbWUiLCJ4IiwieSIsImZpbGxTdHlsZSIsInNyYyIsImNvbmNhdCIsIm9ubG9hZCIsImRyYXdJbWFnZSIsImkiLCJqIiwibCIsInBpZWNlIiwib2Zmc2V0WCIsImNsaWNrZWRSb3ciLCJjbGlja2VkQ29sIiwiZmxvb3IiLCJtb3ZlUGllY2UiLCJ3aGl0ZVBpZWNlc0lEIiwid2lkdGgiLCJoZWlnaHQiLCJzZWxlY3RQaWVjZSIsImV2ZW50IiwiYmxhY2tQaWVjZXNJRCIsIkNSIiwiQ0MiLCJ3aGljaFBpZWNlIiwicGllY2VJRCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwibWFrZU1vdmUiLCJvZmZzZXRZIiwiY2xpY2tlZENvbDIiLCJ3aGl0ZU1vdmVzIiwiYmxhY2tNb3ZlcyIsImNsaWNrZWRSb3cyIiwicmVzaXplQ2FudmFzIiwibW92ZWRQaWVjZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxVQUFZQyxTQUFTQyxlQUFlLFdBQVcsRUFDL0NDLElBQU1ILFVBQVVJLFdBQVcsSUFBSSxFQUQvQkosV0FBWUMsVUFDWkUsV0FBZSxVQUNmRSxZQUFhQyxPQUFT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Y29uc3QgZ2FtZUJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lQm9hcmRcIik7XHJcbmNvbnN0IGN0eCA9IGdhbWVCb2FyZC5nZXRDb250ZXh0KFwiMmRcIik7XHJcbmNvbnN0IGJyb3duQ29sb3IgPSBcIiM2NTNjMTBcIjtcclxuY29uc3Qgd2hpdGVDb2xvciA9IFwiI2RmYzc5NVwiO1xyXG5jb25zdCB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5jb25zdCB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbmNvbnN0IGdhbWVCb2FyZFNpemUgPSBNYXRoLm1pbih3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0LCA2MDApO1xyXG5jb25zdCBib2FyZCA9IFtcclxuXHRbXCJyXCIsIFwicFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlBcIiwgXCJSXCJdLFxyXG5cdFtcIm5cIiwgXCJwXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiUFwiLCBcIk5cIl0sXHJcblx0W1wiYlwiLCBcInBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJQXCIsIFwiQlwiXSxcclxuXHRbXCJxXCIsIFwicFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlBcIiwgXCJRXCJdLFxyXG5cdFtcImtcIiwgXCJwXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiUFwiLCBcIktcIl0sXHJcblx0W1wiYlwiLCBcInBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJQXCIsIFwiQlwiXSxcclxuXHRbXCJuXCIsIFwicFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlBcIiwgXCJOXCJdLFxyXG5cdFtcInJcIiwgXCJwXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiUFwiLCBcIlJcIl0sXHJcbl07XHJcblxyXG5jb25zdCBwaWVjZU5hbWVzID0ge1xyXG5cdHA6IFwiQnBhd25cIixcclxuXHRyOiBcIkJyb29rXCIsXHJcblx0bjogXCJCa25pZ2h0XCIsXHJcblx0YjogXCJCYmlzaG9wXCIsXHJcblx0cTogXCJCcXVlZW5cIixcclxuXHRrOiBcIkJraW5nXCIsXHJcblxyXG5cdFA6IFwiV3Bhd25cIixcclxuXHRSOiBcIldyb29rXCIsXHJcblx0TjogXCJXa25pZ2h0XCIsXHJcblx0QjogXCJXYmlzaG9wXCIsXHJcblx0UTogXCJXcXVlZW5cIixcclxuXHRLOiBcIldraW5nXCIsXHJcbn07XHJcblxyXG5sZXQgdGlsZVNpemUgPSBnYW1lQm9hcmRTaXplIC8gODtcclxubGV0IHNlbGVjdGVkUGllY2UgPSBudWxsO1xyXG5sZXQgd2hpdGVzTW92ZSA9IHRydWU7XHJcblxyXG5jb25zdCBkcmF3UGllY2UgPSAocGllY2VOYW1lLCB4LCB5KSA9PiB7XHJcblx0Y29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcblx0aW1nLnNyYyA9IGAuL2Rpc3QvaW1nLyR7cGllY2VOYW1lfS5wbmdgO1xyXG5cclxuXHRpbWcub25sb2FkID0gKCkgPT4ge1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShpbWcsIHgsIHksIHRpbGVTaXplLCB0aWxlU2l6ZSk7XHJcblx0fTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdCb2FyZEFuZFBpZWNlcyA9IChnYW1lQm9hcmRTaXplKSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgZ2FtZUJvYXJkU2l6ZTsgaSArPSB0aWxlU2l6ZSwgaisrKSB7XHJcblx0XHRmb3IgKGxldCBrID0gMCwgbCA9IDA7IGsgPCBnYW1lQm9hcmRTaXplOyBrICs9IHRpbGVTaXplLCBsKyspIHtcclxuXHRcdFx0aWYgKGogJSAyID09PSAwKSB7XHJcblx0XHRcdFx0aWYgKGwgJSAyID09PSAwKSB7XHJcblx0XHRcdFx0XHRjdHguZmlsbFN0eWxlID0gd2hpdGVDb2xvcjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGJyb3duQ29sb3I7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmIChsICUgMiA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGJyb3duQ29sb3I7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGN0eC5maWxsU3R5bGUgPSB3aGl0ZUNvbG9yO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgcGllY2UgPSBib2FyZFtqXVtsXTtcclxuXHJcblx0XHRcdGlmIChwaWVjZSAhPSBcIlwiKSB7XHJcblx0XHRcdFx0ZHJhd1BpZWNlKHBpZWNlTmFtZXNbcGllY2VdLCBpLCBrKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y3R4LmZpbGxSZWN0KGksIGssIHRpbGVTaXplLCB0aWxlU2l6ZSk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgcmVzaXplQ2FudmFzID0gKCkgPT4ge1xyXG5cdGdhbWVCb2FyZC53aWR0aCA9IGdhbWVCb2FyZFNpemU7XHJcblx0Z2FtZUJvYXJkLmhlaWdodCA9IGdhbWVCb2FyZFNpemU7XHJcblx0ZHJhd0JvYXJkQW5kUGllY2VzKGdhbWVCb2FyZFNpemUpO1xyXG59O1xyXG5cclxuY29uc3Qgc2VsZWN0UGllY2UgPSAoZXZlbnQpID0+IHtcclxuXHRsZXQgeCA9IGV2ZW50Lm9mZnNldFg7XHJcblx0bGV0IHkgPSBldmVudC5vZmZzZXRZO1xyXG5cclxuXHRjb25zdCBjbGlja2VkUm93ID0gTWF0aC5mbG9vcih5IC8gdGlsZVNpemUpO1xyXG5cdGNvbnN0IGNsaWNrZWRDb2wgPSBNYXRoLmZsb29yKHggLyB0aWxlU2l6ZSk7XHJcblxyXG5cdGNvbnN0IENSID0gTWF0aC5mbG9vcih5IC8gdGlsZVNpemUpO1xyXG5cdGNvbnN0IENDID0gTWF0aC5mbG9vcih4IC8gdGlsZVNpemUpO1xyXG5cclxuXHRzZWxlY3RlZFBpZWNlID0gYm9hcmRbY2xpY2tlZENvbF1bY2xpY2tlZFJvd107XHJcblxyXG5cdG1vdmVQaWVjZShzZWxlY3RlZFBpZWNlLCBDUiwgQ0MpO1xyXG59O1xyXG5cclxuY29uc3QgbW92ZVBpZWNlID0gKHNlbGVjdGVkUGllY2UsIENSLCBDQykgPT4ge1xyXG5cdGxldCBtb3ZlZFBpZWNlO1xyXG5cdGNvbnN0IHdoaXRlUGllY2VzSUQgPSB7XHJcblx0XHRQOiBcIldwYXduXCIsXHJcblx0XHRSOiBcIldyb29rXCIsXHJcblx0XHROOiBcIldrbmlnaHRcIixcclxuXHRcdEI6IFwiV2Jpc2hvcFwiLFxyXG5cdFx0UTogXCJXcXVlZW5cIixcclxuXHRcdEs6IFwiV2tpbmdcIixcclxuXHR9O1xyXG5cclxuXHRjb25zdCBibGFja1BpZWNlc0lEID0ge1xyXG5cdFx0cDogXCJCcGF3blwiLFxyXG5cdFx0cjogXCJCcm9va1wiLFxyXG5cdFx0bjogXCJCa25pZ2h0XCIsXHJcblx0XHRiOiBcIkJiaXNob3BcIixcclxuXHRcdHE6IFwiQnF1ZWVuXCIsXHJcblx0XHRrOiBcIkJraW5nXCIsXHJcblx0fTtcclxuXHJcblx0Y29uc3Qgd2hpY2hQaWVjZSA9IChwaWVjZUlEKSA9PiB7XHJcblx0XHRpZiAoc2VsZWN0ZWRQaWVjZSA9PSBwaWVjZUlEKSB7XHJcblx0XHRcdGJvYXJkLmZvckVhY2goKGNsaWNrZWRSb3csIGkpID0+IHtcclxuXHRcdFx0XHRjbGlja2VkUm93LmZvckVhY2goKGNsaWNrZWRDb2wsIGopID0+IHtcclxuXHRcdFx0XHRcdGlmIChjbGlja2VkQ29sID09IHBpZWNlSUQgJiYgQ1IgPT0gaiAmJiBDQyA9PSBpKSB7XHJcblx0XHRcdFx0XHRcdGJvYXJkW0NDXVtDUl0gPSBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgbWFrZU1vdmUgPSAoZXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRkcmF3Qm9hcmRBbmRQaWVjZXMoZ2FtZUJvYXJkU2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0bGV0IHggPSBldmVudC5vZmZzZXRYO1xyXG5cdFx0XHRcdFx0XHRcdGxldCB5ID0gZXZlbnQub2Zmc2V0WTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2xpY2tlZFJvdzIgPSBNYXRoLmZsb29yKHkgLyB0aWxlU2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2xpY2tlZENvbDIgPSBNYXRoLmZsb29yKHggLyB0aWxlU2l6ZSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGJvYXJkW0NDXVtDUl0gPSBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoYm9hcmRbY2xpY2tlZENvbDJdW2NsaWNrZWRSb3cyXSA9PSBcIlwiKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRib2FyZFtjbGlja2VkQ29sMl1bY2xpY2tlZFJvdzJdID0gY2xpY2tlZENvbDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRtb3ZlZFBpZWNlID0gYm9hcmRbY2xpY2tlZENvbDJdW2NsaWNrZWRSb3cyXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRkcmF3UGllY2UoXHJcblx0XHRcdFx0XHRcdFx0XHRcdHBpZWNlTmFtZXNbbW92ZWRQaWVjZV0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrZWRDb2wyICogdGlsZVNpemUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrZWRSb3cyICogdGlsZVNpemVcclxuXHRcdFx0XHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0d2hpdGVzTW92ZSA9ICF3aGl0ZXNNb3ZlO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cod2hpdGVzTW92ZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRnYW1lQm9hcmQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1ha2VNb3ZlKTtcclxuXHRcdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRcdGdhbWVCb2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbWFrZU1vdmUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRpZiAod2hpdGVzTW92ZSkge1xyXG5cdFx0Zm9yIChsZXQgcGllY2VJRCBpbiB3aGl0ZVBpZWNlc0lEKSB7XHJcblx0XHRcdGlmIChwaWVjZUlEID09IHNlbGVjdGVkUGllY2UpIHtcclxuXHRcdFx0XHR3aGljaFBpZWNlKHBpZWNlSUQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGZvciAobGV0IHBpZWNlSUQgaW4gYmxhY2tQaWVjZXNJRCkge1xyXG5cdFx0XHRpZiAocGllY2VJRCA9PSBzZWxlY3RlZFBpZWNlKSB7XHJcblx0XHRcdFx0d2hpY2hQaWVjZShwaWVjZUlEKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHdoaXRlTW92ZXMgPSAoKSA9PiB7fTtcclxuXHJcbmNvbnN0IGJsYWNrTW92ZXMgPSAoKSA9PiB7fTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZUNhbnZhcyk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG5cdGdhbWVCb2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0UGllY2UpO1xyXG5cdHJlc2l6ZUNhbnZhcygpO1xyXG59KTtcclxuIl19
